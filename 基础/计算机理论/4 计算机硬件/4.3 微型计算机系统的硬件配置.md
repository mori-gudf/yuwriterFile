# 4.3 微型计算机系统的硬件配置

自1971年美国生产的第一台微机以来，微机已经从4位发展到64位。以其高性价比，小巧，灵活等有点深受公众喜爱。微机也是5部分组成。

* 主机：
  * CPU：控制器和运算器
  * 存储：内存
* 外设：io设备

【4位】，指的是通用寄存器位宽。单次cpu处理量。==4位存储单元==，2的四次方=16 16种存储地址，每个存储地址存放一个==存储单元==即存放1个字节。所以内存总数知道怎么算了把。

【32位】，2的30次方就是1g * 2的二次方就是4g 。每个寄存器地址存储一个存储单元 1字节 。所以all内存最多 4gb。

【64位】 内存寻址不再是平静下来


## 4.3.1 ==CPU （缓存与SMP还有APIC需要与java语言并发结合织网 需要整理继续研究。。并发。。jvm 详见思考）==

CPU（Central Processing Unit）是微型计算机的核心，它的主要功能是执行程序指令，完成各种运算和控制功能。CPU的类型标志着微型计算机类型。主要有**pc x86 cpu**架构的电脑和**arm安卓等移动设备cpu**架构。
不列举各种cpu历史了，关注下指标：主频、总线宽度、内部缓存、外部缓存、协处理器、总线速度等参数是CPU的主要性能指标。
  * 主频：【主频也叫时钟频率】，单位是MHz，用来表示CPU的运算速度。  1GHz,2.66Ghz。CPU实际**运算速度**依赖主频以及内部流水线等各方面指标结构。
  * 外频：**外频是CPU的基准频率**，单位也是MHz。CPU的外频决定着整块主板的运行速度。==超频==会导致主版和cpu异步，导致服务器不稳定。
  * 前端总线（FSB）频率：数据传输速度===总线线宽== * FSB频率，影响CPU接收数据传输量。**AMD**某些处理器是直接和内存交换数据，就没有FSB这一说
  * CPU的位/字长：通用寄存器一次处理的二进制数目，32位代表2的32次方bit，每bit映射一个内存存储单位，每个单位是1byte，所以32位最多==支持4G内存==。实际软件内存小于4g（寄存器字部分用于硬件）
  * ==CPU内缓存==的**运行频率极高**，一般是和处理器同频运作，工作效率远远大于系统内存和硬盘。实际工作时，CPU往往需要重复读取同样的数据块，而缓存容量的增大，可以大幅度提升CPU内部**读取数据的命中率**，而不用再到内存或者硬盘上寻找，以此提高系统性能
    *  【l1缓存】：CPU第一层高速缓存，分【指令和数据缓存】，静态RAM,结构复杂，容量只有32-256KB
    * 【l2缓存】：分【内部外部】芯片，内部芯片缓存运行速度同主频，外部缓存只有一半主频。现在**家庭用**CPU容量最大的是512KB，而服务器和工作站上用CPU的L2高速缓存更高达256-1MB，有的高达2MB或者3MB。
    * 【l3缓存】：降低内存延迟，提升大数据量
  * 流水线：自468芯片开始，一个cpu由4-6个不同功能电路组成。经典奔腾每条整数流水线都分为四级流水，即**指令预取、译码、执行、写回结果**，浮点流水又分为八级流水。构建一套SMP（**多处理器系统，超标量**Symmetrical Multi-Processing）系统的必要条件是：支**持SMP的硬件包括主板和CPU**；支持SMP的系统平台，再就是支持SMP的应用软件。
  * 超标量：组件SMP系统，CPU需要**内置APIC（Advanced Programmable Interrupt Controllers）单元**，即高级可编程中断控制器。多核中断处理，同产品类型同频率。
![apic]($resource/apic.png)
----
arm和x86
* x86架构采用CISC(复杂指令集计算机)，而ARM采用RISC(精简指令集计算机)。
* 扩展能力：X86用桥的方式扩展设备。
* 操作系统兼容性：x86强，arm自从谷歌的安卓系统操作系统后才出现兼容统一
* 功耗：x86高
* 三级缓存：l1 l2 l3
* 然而，这一切似乎不容易实现，无论Intel、AMD还是微软，它们的辉煌成就都构建在X86的基础之上，转向RISC对它们来说无异于釜底抽薪。技术角度可行，软件兼容和发展历史不允许。

## 4.3.2 存储器系统

* 存储器概念：计算机的记忆设备，存放程序和数据的设备和部件。保障计算机的记忆功能。
* 存储器系统：存储器以及管理存储器的软硬件（算法/调度设备）组成的系统
* ==内存==：主存，与cpu与高速缓存交互，断电丢失
  * 存储概念：
       *  一个双稳态半导体电路或CMOS晶体管是**存储元**，仅存储一个bit
        * 多个存储元组成==存储单元==，byte
        * 存储单元总和即存储容量。假设存储器地址码（MAR主存地址寄存器）是==20位bit==，那么2的20次方个存储单元就是==1MB==
  * 分类：
    * RAM：
         *  DRAM，内存条，动态RAM.小电容组成，需要定期刷新。不可长期保存。
         * SRAM 静态RAM，不需要刷新，造价贵
         * VRAM,双端口视频适配器，同时存取数据，双屏幕
         * 高速缓存Cache:这种存储器位于CPU和主存储器DRAM之间，规模较小，但速度快。Cache存储器由一组SRAM芯片和Cache存储器控制电路组成。Cache一般分为一级和二级
         * CMOS,耗电低，一般用于存储时间日期等作为集成在主板的RAM
    * ROM
      * BIOS：主板集成的基础输入输出系统，用于存储基本程序以及上电自检，引导，外设驱动，时钟控制。
      * 键盘BIOS
## 4.3.3 主机板
* 构成：cpu槽，内存芯片插槽，高速缓存，bios芯片，cmos芯片，IO设备插槽，扩展板，电池，端口等
  * 芯片
    * bios,方块状，搭配主机基本io程序，引导系统，识别硬件，调整外频
    * 南北桥：==南侨==在PCI（外设部件互联标准）插槽上面，负责硬盘等存储设备与pci之间（io什么的）的数据流通。==北桥==主要负责cpu、内存、显卡的交通。需要散热。
    * RAID控制：磁盘阵列
  * 扩展槽：
    * 内存插槽
    * AGP插槽，PCI Express之前 经常用来x显卡
    * PCI Express插槽
    * PCI插槽：声卡，网卡等等
  * 对外接口：
    * 硬盘接口
    * COM串口
    * USB接口
    * MIDI接口：声卡，游戏杠
   
* 主机变化原因：新的CPU、芯片组数量减少、总线变化。比如从AMD的K58开始，主板内置了内存控制器，因此北桥便不必集成内存控制器，这样不但减少了芯片组的制作难度

## 4.3.4 输入/输出设备
* 输入设备：外围数据转换成计算机接收的数据
* 分类：
  * 字符：键盘，（中断响应）
  * 光学阅读：光学字符阅读器，光学标记阅读器
  * 图形：鼠标、操纵杆、光笔
  * 图像：摄像机、扫描仪、传真
  * 模拟输入设备：语言模数转换识别

* 输出设备：计算机数据转换成人能接受的
* 有：打印机，显示器，绘图仪，影像输出，语音输出等。

## 外存储设备
* 硬盘：（结合操作系统更深理解管理硬盘）由盘片、驱动器、适配器组成。
  * 调度：硬盘驱动器适配器各自有CPU
  *  组成：硬盘驱动器由盘径，接口类型，容量进行区分。按盘径分为5.25英寸、3.5英寸、2.5英寸以及1.8英寸等数种。按接口类型分为ST506接口、AT-BUS接口（又称IDE接口）、ESDI接口以及SCSI接口等数种。
  * 存储大小：存储容量 = n×t×s×b。其中n为保存数据的总盘面数（是否双面）；t为每面磁道数；s为每道的扇区数；b为每个扇区存储的字节数。
  * 存取速率：寻道，磁头移动，等待时间为扇区（磁道的一部分）旋转时间。
* 光盘：
  * CD-ROM :只读光盘
  * WORM：刻录光盘，只写一次
  * 读写光盘
* u盘 ：U盘，全称“USB接口移动硬盘”，英文名USB removable（mobile）hard disk。
  * 热插拔
  * 无外接电源
  * 适配多种操作系统
  * 电子存储
  * 耐久10年
  * 支持加密 


