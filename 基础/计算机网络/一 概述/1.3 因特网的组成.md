# 1.3 因特网的组成

【基本组成】网络拓扑复杂，地理覆盖全球，但工作方式逻辑清晰。
* 边缘部分：所有连接到因特网的主机，用于给用户进行**通信**和**资源共享**
* 核心部分：大量网络与连接网络的路由器组成，主要为边缘部分提供服务
![组成]($resource/%E7%BB%84%E6%88%90.jpg)


---

## 1.3.1 边缘部分：

【端与端】
* 什么是端：端系统(end system)，“端”就是“末端”的意思（即因特网的末端）。它可以是手机，电脑，摄像头，大型机，某个ISP
* 通信：两端的程序相互通信（进程通信），也称计算机通信。
* 工作模式：
  * CS：客户-服务器模式
    *  客户程序：(1) 被用户调用后运行，在通信时主动向远地服务器发起通信（**请求服务**）。因此，客户程序必须知道服务器程序的地址。(2) 不需要特殊的硬件和很复杂的操作系统。
    *  服务器程序：(1) 是一种**专门用来提供某种服务**的程序，可同时处理多个远地或本地客户的请求。(2) 系统启动后即自动调用并一直**不断地运行着**，被动地等待并接受来自各地的客户的通信请求。因此，服务器程序不需要知道客户程序的地址。(3) 一般需要有**强大的硬件和高级的操作系统**支持。
    *![cs]($resource/cs.jpg)
  * P2P (peer-to-peer，简写为)：  对等工作模式，只要两个主机都运行了对等连接软件（P2P软件），它们就可以==进行平等的、对等连接通信==。这时，双方都可以下载对方已经存储在硬盘中的共享文档。因此这种工作方式也称为==P2P文件共享==。本质是互为CS
![P2P]($resource/P2P.jpeg)

## 1.3.2 核心部分：

在网络核心部分起特殊作用的是路由器（router），它是一种专用计算机（但不是主机）。路由器是实现分组交换（packet switching）的关键构件，其任务是转发收到的分组，这是网络核心部分最重要的功能

【电路交换】
* 解决电话相连==线路过多==的问题，需要使用==交换机==
![电话连接]($resource/%E7%94%B5%E8%AF%9D%E8%BF%9E%E6%8E%A5.jpg)
* 电路交换**概念**：电话与电话建立通信线路，而有且仅有一条分配的线路是畅通的，否则电话会占线。这种必须经过“==建立连接（占用通信资源）→通话（一直占用通信资源）→释放连接（归还通信资源）==”三个步骤的交换方式称为==电路交换==
* 电路交换**原理**：在通话的全部时间内，通话的两个用户始终占用端到端的通信资源。原理如图
![电路交换]($resource/%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2.jpeg)
* 局限：效率低下，==始终独占==，而计算机突发信息传输时间可能只需要10%甚是1%，不需要像通电话一样长期占线。比如一端正在输入文本的时候，就应该释放资源，否则资源==空闲等待造成浪费==。

==【分组交换】==
* 存储转发技术：
  * 报文：等待发送的整块数据
  * 分组/包：（报文划分出）**等长数据段**+头部header（必要的控制信息元数据）组成**分组**
![分组交换的报文]($resource/%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%E7%9A%84%E6%8A%A5%E6%96%87.png)
* 关注点：强调的是**因特网核心部分**
  * 端与核心：低速率链路相连，此处不强调
  * 核心之间：**路由**器一般由高速链路相连，直接进行**分组转发**。
![分组交换示意]($resource/%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%E7%A4%BA%E6%84%8F.jpeg)
* 路由器与主机的异同：
  * 主机提供**信息处理**能力给用户
  * 路由是用来**分组转发**的
* 分组交换优点（对比电路交换）：
  * 高效：逐段占用而不是独占
  * 灵活：每个分组独立转发路由
  * 迅速：分组作为单位，不建立连接（电路交换双端需要连接）就能向其他主机发送分组
  * 可靠：依靠网络协议做可靠处理，分布式多路由提高了网络的生存性
  
  
  ---
  【三种交换方式区别】
   *  **电路交换**——整个报文的比特流连续地从源点直达终点，好像在一个管道中传送。【电话线】
   * **报文交换**——整个报文先传送到相邻结点，全部存储下来后查找转发表，转发到下一个结点。【电报通信，纸袋穿孔，报文中心员工转发查表】
   * **分组交换**——单个分组（这只是整个报文的一部分）传送到相邻结点，存储下来后查找转发表，转发到下一个结点。【演化至今的网络分组交换传输】

![三种交换]($resource/%E4%B8%89%E7%A7%8D%E4%BA%A4%E6%8D%A2.png)

